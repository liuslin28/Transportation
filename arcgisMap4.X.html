<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>智慧公交二期地图功能展示</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="CSS/bootstrap.css">
    <script src="JS/jquery.js"></script>
    <script src="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src="JS/bootstrap.js"></script>


    <!--arcgis for js js已本地化，css未本地化-->
    <!--<link rel="stylesheet" type="text/css" href="http://localhost/arcgis_js_v411_sdk/arcgis_js_api/library/4.11/esri/css/main.css">-->
    <link rel="stylesheet" type="text/css" href="https://js.arcgis.com/4.11/esri/themes/light/main.css">
    <script type="text/javascript"
            src="http://localhost/arcgis_js_v411_sdk/arcgis_js_api/library/4.11/init.js"></script>
    <!--Font Awesome图标-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
          integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <style>
        html, body {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }

        /*------------------------------*/
        /*primary-nav*/
        .primary-nav {
            height: 50px;
            background-color: rgb(27, 54, 71);
            font-weight: bold;
            /*background-color: rgb(22, 107, 162);*/

        }
        .nav-item-primary {
            margin: 0 10px;
        }

        /*------------------------------*/
        /*second-nav*/
        #second-nav {
            height: 50px;
            width: 100%;
            background-color: rgb(22, 107, 162);
            /*background-color: rgb(22, 145, 190);*/
            display: none;
            padding-left: 210px;
        }

        .second-nav-ul {
            width: 100%;
        }
        .nav-item-second {
            margin: 0 10px;
        }
        .nav-item-second a{
            color: white;

        }

        /*禁用折叠动画*/
        .collapsing {
            -webkit-transition: none;
            transition: none;
            display: none;
        }

        /*------------------------------*/
        #wrapper {
            height: 100%;
            width: 100%;
            margin: 0;
        }

        /* Change the width of the sidebar to display it*/
        #wrapper.menuDisplayed #sidebar-wrapper {
            width: 300px;
        }

        #wrapper.menuDisplayed #page-content-wrapper {
            padding-right: 300px;
        }

        /* Sidebar */
        #sidebar-wrapper {
            float: right;
            z-index: 1;
            width: 0;
            height: 100%;
            overflow-y: hidden;
            background: #f4f4f4;
            opacity: 0.9;
            transition: all .5s;
            display: block;
            /*水平居左*/
            /*position: absolute;*/
            /*display: flex;*/
            /*align-items: center;*/
        }

        /*------------------------------*/
        /* Main Content */
        #page-content-wrapper {
            width: 100%;
            height: 100%;
            position: absolute;
            margin: 0;
            transition: all .5s;
        }

        /*地图*/
        #viewDiv {
            width: 100%;
            height: 100%;
        }

    </style>

</head>
<body>
<!--导航栏 primary-nav -->
<nav class="navbar navbar-expand-lg navbar-dark  primary-nav">
    <a class="navbar-brand" href="#">
        <img src="CSS/svg/bus.svg" width="30" height="30" class="d-inline-block align-top" alt="">
        <span style="margin-left: 20px;margin-right: 20px;font-weight: bold;">公交仿真系统</span>
    </a>
    <div class="collapse navbar-collapse justify-content-center">
        <ul class="navbar-nav ">
            <li class="nav-item nav-item-primary">
                <a class="nav-link" data-toggle="collapse" href="#secondNav1" aria-expanded="false"
                   aria-controls="secondNav1">数据加载</a>
            </li>
            <li class="nav-item nav-item-primary">
                <a class="nav-link" data-toggle="collapse" href="#secondNav2" aria-expanded="false"
                   aria-controls="secondNav2">覆盖性分析</a>
            </li>
            <li class="nav-item nav-item-primary">
                <a class="nav-link" data-toggle="collapse" href="#secondNav3" aria-expanded="false"
                   aria-controls="secondNav3">连通性分析</a>
            </li>
            <li class="nav-item nav-item-primary">
                <a class="nav-link" data-toggle="collapse" href="#secondNav4" aria-expanded="false"
                   aria-controls="secondNav4">衔接性分析</a>
            </li>
        </ul>
    </div>
    <a class="navbar-brand" href="#" id="menu-toggle">
        <img src="CSS/svg/menu.svg" width="25" height="25" class="d-inline-block align-top" alt="">
    </a>
</nav>

<!--次级导航栏 second-nav-->
<div class="tab-content" id="second-nav">
    <nav class="navbar navbar-expand collapse" id="secondNav1" data-parent="#second-nav">
        <ul class="nav justify-content-center second-nav-ul">
            <li class="nav-item nav-item-second">
                <a class="nav-link active" href="#" onclick="addPointData()">公交站点数据</a>
            </li>
            <li class="nav-item nav-item-second">
                <a class="nav-link" href="#">中心城区数据</a>
            </li>
        </ul>
    </nav>
    <nav class="navbar navbar-expand collapse" id="secondNav2" data-parent="#second-nav">
        <ul class="nav justify-content-center second-nav-ul">
            <li class="nav-item nav-item-second">
                <a class="nav-link active" href="#" onclick="bufferGPTool()">站点覆盖</a>
            </li>
            <li class="nav-item nav-item-second">
                <a class="nav-link" href="#">线网覆盖</a>
            </li>
            <li class="nav-item nav-item-second">
                <a class="nav-link" href="#" onclick="testGPAsynchronous()">功能测试</a>
            </li>
        </ul>
    </nav>
    <nav class="navbar navbar-expand collapse" id="secondNav3" data-parent="#second-nav">
        <ul class="nav justify-content-center second-nav-ul">
            <li class="nav-item nav-item-second">
                <a class="nav-link active" href="#">节点分析</a>
            </li>
            <li class="nav-item nav-item-second">
                <a class="nav-link" href="#">路径分析</a>
            </li>
        </ul>
    </nav>
    <nav class="navbar navbar-expand collapse" id="secondNav4" data-parent="#second-nav">
        <ul class="nav justify-content-center second-nav-ul">
            <li class="nav-item nav-item-second">
                <a class="nav-link active" href="#">公交-地铁换乘</a>
            </li>
            <li class="nav-item nav-item-second">
                <a class="nav-link" href="#">公交-公共自行车换乘</a>
            </li>
            <li class="nav-item nav-item-second">
                <a class="nav-link" href="#">地铁-公共自行 车换乘</a>
            </li>
        </ul>
    </nav>
</div>

<div id="wrapper">
    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div class="container-fluid" style="height: 100%;margin: 0;padding: 0;">
            <div class="row" style="height: 100%;margin: 0;padding: 0;">
                <div class="col-lg-12" style="height: 100%;margin: 0;padding: 0;">
                    <!--<div id="viewDiv"></div>-->
                    <h1 class="text-center">Bootstrap Sidebar</h1>
                    <h2 class="small text-center">Second Header</h2>
                    <p class="text-center">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium
                        perferendis maiores velit ad id delectus nisi eligendi doloremque officia necessitatibus,
                        repellendus alias omnis, natus nam voluptates dolor vel minus ab?</p>
                </div>
            </div>
        </div>
    </div>

    <!--Sidebar-->
    <div id="sidebar-wrapper">
        此处应有显示结果
    </div>
</div>
</body>

<script type="text/javascript" src="JS/initMap.js"></script>
<script>
    $(document).ready(function () {
        var secondNav = null;
        var primaryNav = null;
        $("#menu-toggle").click(function (e) {
            e.preventDefault();
            $("#wrapper").toggleClass("menuDisplayed");

        });
        // primary-nav点击
        $(".nav-item-primary").click(function (e) {
                e.preventDefault();
                let targetNav = e.currentTarget.innerText;
                var navTarget = $("#second-nav");
                if (primaryNav) {
                    if (targetNav === primaryNav) {
                        navTarget.slideToggle();
                    } else {
                        console.log(e);
                    }
                } else {
                    navTarget.slideToggle();

                }
                primaryNav = targetNav;
            }
        )
        // second-nav点击
        $(".nav-item-second").click(function (e) {
                e.preventDefault();
                let targetNav = e.currentTarget.innerText;
                if (secondNav) {
                    if (targetNav === secondNav) {
                        $("#wrapper").toggleClass("menuDisplayed");

                    } else {
                        // $("#wrapper").toggleClass("menuDisplayed");
                        console.log(e);
                    }
                } else {
                    $("#wrapper").toggleClass("menuDisplayed");
                }
                secondNav = targetNav;
            }
        )
    });

</script>

</html>